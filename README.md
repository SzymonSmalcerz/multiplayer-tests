# Multiplayer Top-Down Game

Real-time multiplayer game — Colyseus (Node.js) backend + Phaser 3 browser client.

## Quick Start

```bash
npm install
npm start
```

Then open **http://localhost:3000** in two browser tabs, enter a nickname and hit **Join Game**.

## Project Structure

```
src/
  server/
    index.ts      — Colyseus + Express server entry point
    GameRoom.ts   — Room schema, movement validation, tree layout
  client/
    main.ts       — Phaser 3 game config
    HomeScene.ts  — Nickname input → join room
    GameScene.ts  — In-game rendering, physics, interpolation
    types.ts      — Shared TypeScript interfaces
public/
  index.html      — Single-page shell (overlay + game div)
  bundle.js       — Generated by esbuild (do not edit directly)
  assets/         — Sprites, tiles, trees
```

## NPM Scripts

| Command | Description |
|---|---|
| `npm start` | Build everything then run the server |
| `npm run build` | Build server + client |
| `npm run build:server` | Compile TypeScript server (→ dist/) |
| `npm run build:client` | Bundle client TypeScript (→ public/bundle.js) |
| `npm run dev` | Watch-mode: auto-rebuild + auto-restart |

## Technical Details

- **Backend**: Node.js 20+, Colyseus 0.15, TypeScript strict
- **Frontend**: Phaser 3 (Arcade Physics), bundled with esbuild
- **Network**: WebSocket via Colyseus, state broadcast @ 20 Hz
- **Max players**: 50 per room
- **Map**: 2000 × 2000 px, 100 randomly placed trees, grass tile background
- **Physics**: Arcade — player ↔ tree collision, world bounds clamping
- **Movement**: Client-prediction + server reconciliation (max speed 300 px/s)
- **Animations**: 4-directional walk cycle (9 frames per direction, 64 × 64)

## Player Sprite Format

Each PNG under `public/assets/player/{gender}/` is 576 × 256 (36 frames):

| Row | Frames | Direction |
|-----|--------|-----------|
| 0 | 0 – 8 | Walk down |
| 1 | 9 – 17 | Walk left |
| 2 | 18 – 26 | Walk up |
| 3 | 27 – 35 | Walk right |

## Testing Multiplayer

1. Open `http://localhost:3000` in **Tab 1** → enter "Player1" → Join
2. Open `http://localhost:3000` in **Tab 2** → enter "Player2" → Join
3. Move with WASD/Arrow Keys — both players should see each other move in real time
